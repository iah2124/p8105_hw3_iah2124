p8105_hw3_iah2124
================
Iris Hart
2024-10-10

# Problem 1

### Loading packages + data

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(ggplot2)

library(p8105.datasets)
data("ny_noaa")
```

EDIT STILL There are seven variables and 2,595,176 observations in the
NY NOAA data set. The variables are ID, date, prcp, snow, snwd, tmax,
and tmin.

### Create year, month, and day variables and convert precipitation variable to be mm instead of tenths of mm. Convert daily temperature min and max variables to be degrees to be degrees Celsius from tenths of degrees Celsius.

``` r
library(dplyr)
library(lubridate)

ny_noaa_clean <- ny_noaa %>%
  mutate(
    year = year(date),              
    month = month(date),            
    day = day(date),               
    tmax = as.numeric(tmax) / 10,   
    tmin = as.numeric(tmin) / 10,   
    prcp = as.numeric(prcp) / 100,  
    snow = as.numeric(snow) / 10    
  )
```

View to make sure new variables are created and changes were made

``` r
view(ny_noaa_clean)
```

### Snowfall analysis: most commonly observed values

``` r
snowfall_counts = ny_noaa_clean %>%
  count(snow) %>%
  arrange(desc(n))  

head(snowfall_counts)
```

    ## # A tibble: 6 × 2
    ##    snow       n
    ##   <dbl>   <int>
    ## 1   0   2008508
    ## 2  NA    381221
    ## 3   2.5   31022
    ## 4   1.3   23095
    ## 5   5.1   18274
    ## 6   7.6   10173

The most commonly observed day by far was 0cm, for 2,008,508 times. This
makes sense because most days in NY do not have snow, there are only a
few days a year that it does snow. The next most common observation was
NA (n = 381,221), which also makes sense since missing data is common.
The next most common snowfall amounts were 2.5cm(n = 31,022) and 1.3cm(n
= 23,095). These amounts are pretty small but it doesn’t typically snow
too much when it does snow so this also would be common amounts. The
last two most common snowfall amounts are 5.1cm(n = 18,274) and 7.6cm(n
= 10,173). These amounts are a bit larger than the last two but still
not a huge amount of snow.

### Filter data to get January and July data (months 1 and 7)

``` r
ny_noaa_jan_july = ny_noaa_clean %>%
  filter(month %in% c(1, 7)) %>%
  group_by(id, year, month) %>%
  summarize(avg_tmax = mean(tmax, na.rm = TRUE), .groups = "drop")
head(ny_noaa_jan_july)
```

    ## # A tibble: 6 × 4
    ##   id           year month avg_tmax
    ##   <chr>       <dbl> <dbl>    <dbl>
    ## 1 US1NYAB0001  2008     1      NaN
    ## 2 US1NYAB0001  2008     7      NaN
    ## 3 US1NYAB0001  2009     1      NaN
    ## 4 US1NYAB0001  2009     7      NaN
    ## 5 US1NYAB0001  2010     1      NaN
    ## 6 US1NYAB0001  2010     7      NaN

### Create a two-panel plot of average max temperature in Jan and July

``` r
ggplot(ny_noaa_jan_july, aes(x = year, y = avg_tmax, color = id)) +
  geom_line() +
  facet_wrap(~ month, ncol = 1, labeller = labeller(month = c('1' = "January", '7' = "July"))) +
  labs(
    title = "Average Maximum Temperature in January and July Across Stations",
    x = "Year",
    y = "Average Max Temperature (°C)",
    color = "Station ID"
  ) +
  theme_minimal() +
  theme(legend.position = "none")
```

    ## Warning: Removed 5640 rows containing missing values or values outside the scale range
    ## (`geom_line()`).

![](p8105_hw3_iah2124_files/figure-gfm/unnamed-chunk-6-1.png)<!-- -->
